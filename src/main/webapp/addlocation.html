<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Ajout d'une location</title>
<!-- Ajout de la balise meta pour la compatibilité mobile -->
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Chargement des fichiers CSS de Bootstrap -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body>
	<div class="container">
		<h2 class="mt-5">Ajout d'une nouvelle location</h2>
		<br>
		<p id="success-message" class="alert alert-success" style="display: none;">Location ajoutée avec succès.</p>
		<br>
		<form id="location-form" method="post" action="http://localhost:8080/LocationApp/api/v1/locations">
			<div class="col-md-4">
				<div class="row">
					<div class="form-group">
						<label for="address">Adresse</label> <input type="text"
							class="form-control" id="address" name="address">
					</div>
				</div>
				<div class="row">
					<div class="form-group">
						<label for="zipCode">Code postal</label> <input type="number"
							class="form-control" id="zipCode" name="zipCode">
					</div>
				</div>
				<div class="row">
					<div class="form-group">
						<label for="city">Ville</label> <input type="text"
							class="form-control" id="city" name="city">
					</div>
				</div>
				<div class="row">
					<div class="form-group">
						<label for="nightPrice">Prix</label> <input type="number"
							class="form-control" id="nightPrice" name="nightPrice">
					</div>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col-md-12">
					<button id="submit-button" type="button" class="btn btn-primary">Ajouter</button>
				</div>
			</div>
		</form>
	</div>
	<!-- Chargement des fichiers JavaScript de Bootstrap -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>

	<script>
	    const form = document.getElementById("location-form");
	    const submitButton = document.getElementById("submit-button");
	    const successMessage = document.getElementById("success-message");
	
	    submitButton.addEventListener("click", async () => {
	        const formData = new FormData(form);
	
	        const requestOptions = {
	            method: "POST",
	            headers: {
	                "Authorization": "42",
	                "Content-Type": "application/x-www-form-urlencoded"
	            },
	            body: new URLSearchParams(formData)
	        };
	
	        const response = await fetch("http://localhost:8080/LocationApp/api/v1/locations", requestOptions);
	
	        if (response.ok) {
	            successMessage.style.display = "block";
	        }
	    });
	</script>
	
</body>
</html>
